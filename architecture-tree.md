ğŸ—ï¸ çµæ§‹æ¨¹ï¼šä¸€æ ¸å¤šå±¤æ¶æ§‹ï¼ˆèˆ‡ç¾è¡Œä»£ç¢¼ä¿æŒä¸€è‡´ï¼‰
ä¾è³´æµå‘ï¼štypes â†’ lib â†’ infra â†’ hooks â†’ context â†’ appï¼ˆai ç‚ºå¹³è¡Œå±¤ï¼‰

ğŸ“ æ¶æ§‹è¨­è¨ˆç†å¿µ
éµå¾ª Occam's Razorï¼šä¸å¼•å…¥éå¿…è¦çš„è¤‡é›œåº¦ã€‚
ä¾è³´æ–¹å‘åš´æ ¼å–®å‘ï¼Œæ¯å±¤åªèƒ½ä¾è³´å…¶ä¸‹å±¤ï¼Œæœçµ•å¾ªç’°ä¾è³´ã€‚

Account = Userï¼ˆå€‹äººï¼‰+ Organizationï¼ˆçµ„ç¹”ï¼‰
Workspace = å±¬æ–¼ Account çš„æ¥­å‹™åŸ·è¡Œå–®å…ƒ

å…­å±¤ä¾è³´éˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  app/ï¼ˆè·¯ç”± / è¦–åœ– / é é¢çµ„è£ï¼‰         â† é ‚å±¤ï¼Œå¯ä¾è³´æ‰€æœ‰ä¸‹å±¤ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  context/ï¼ˆå…¨åŸŸ React Contextï¼‰         â† æ¶ˆè²» hooks / infra  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  hooks/ï¼ˆå¯é‡ç”¨ React é‚è¼¯ï¼‰            â† æ¶ˆè²» infra / context â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  infra/ï¼ˆFirebase å¤–éƒ¨æœå‹™ï¼‰            â† æ¶ˆè²» lib / types     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  lib/ï¼ˆç´”å·¥å…·å‡½å¼ï¼Œç„¡å‰¯ä½œç”¨ï¼‰           â† æ¶ˆè²» types           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  types/ï¼ˆæ ¸å¿ƒå‹åˆ¥ï¼Œé›¶ä¾è³´ï¼‰             â† åº•å±¤ï¼Œæ‰€æœ‰å±¤å¯ä¾è³´   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ai/ï¼ˆå¹³è¡Œå±¤ï¼šGenkit æµç¨‹ï¼Œåƒ…è¢« app/ æ¶ˆè²»ï¼Œä¸é€²å…¥ä¸Šè¿°å…­å±¤ï¼‰

Workspace è¦–åœ–å…§éƒ¨æ¡å››å±¤èƒ½åŠ›æ¨¡å‹ï¼ˆcapability å››å±¤ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1 â€” CORE        capabilities/   èƒ½åŠ›æ›è¼‰ç®¡ç†ï¼ˆæ°¸é é¡¯ç¤ºï¼‰  â”‚
â”‚  Layer 2 â€” GOVERNANCE  members/        æˆå“¡æˆæ¬Šï¼ˆæ°¸é é¡¯ç¤ºï¼‰      â”‚
â”‚  Layer 3 â€” BUSINESS    å¯æ›è¼‰æ¨¡çµ„       ç”¢å“åŠŸèƒ½ï¼ˆæŒ‰éœ€æ›è¼‰ï¼‰      â”‚
â”‚  Layer 4 â€” PROJECTION  audit/          å”¯è®€äº‹ä»¶æµï¼ˆæ°¸é é¡¯ç¤ºï¼‰    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸŒ³ å®Œæ•´çµæ§‹æ¨¹
src/
â”‚
â”œâ”€â”€ ğŸ“‹ types/                              # [åº•å±¤] æ ¸å¿ƒå‹åˆ¥ï¼Œé›¶ä¾è³´
â”‚   â”œâ”€â”€ domain.ts                          # æ‰€æœ‰é ˜åŸŸå‹åˆ¥ï¼ˆAccountã€Workspaceã€AuditLogâ€¦ï¼‰
â”‚   â”œâ”€â”€ i18n.ts                            # å¤šèªç³»å‹åˆ¥
â”‚   â””â”€â”€ i18n.schema.ts                     # èªè¨€åŒ…çµæ§‹å®šç¾©
â”‚
â”œâ”€â”€ ğŸ”§ lib/                                # [å·¥å…·å±¤] ç´”å‡½å¼ï¼Œç„¡å‰¯ä½œç”¨
â”‚   â”œâ”€â”€ utils.ts                           # é€šç”¨å·¥å…·ï¼ˆcnã€clsxâ€¦ï¼‰
â”‚   â”œâ”€â”€ format.ts                          # æ ¼å¼åŒ–ï¼ˆæ—¥æœŸã€é‡‘é¡â€¦ï¼‰
â”‚   â””â”€â”€ i18n.ts                            # å¤šèªç³»å·¥å…·å‡½å¼
â”‚
â”œâ”€â”€ ğŸ”Œ infra/                              # [åŸºç¤è¨­æ–½å±¤] Firebase å¤–éƒ¨æœå‹™å°è£
â”‚   â””â”€â”€ firebase/                          # adapter â†’ facade â†’ repository ä¸‰å±¤éé€²
â”‚       â”œâ”€â”€ app.client.ts                  # Firebase App åˆå§‹åŒ–
â”‚       â”œâ”€â”€ firebase.config.ts             # Firebase è¨­å®š
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â”œâ”€â”€ auth.client.ts             # Firebase Auth å®¢æˆ¶ç«¯
â”‚       â”‚   â””â”€â”€ auth.adapter.ts            # Auth æ“ä½œä»‹é¢å¡
â”‚       â”œâ”€â”€ firestore/
â”‚       â”‚   â”œâ”€â”€ firestore.client.ts        # Firestore å®¢æˆ¶ç«¯
â”‚       â”‚   â”œâ”€â”€ firestore.converter.ts     # Firestore å‹åˆ¥è½‰æ›å™¨
â”‚       â”‚   â”œâ”€â”€ firestore.facade.ts        # é«˜å±¤æ¥­å‹™æ“ä½œï¼ˆçµ„åˆå¤šå€‹ adapterï¼‰
â”‚       â”‚   â”œâ”€â”€ firestore.read.adapter.ts  # è®€å–ä»‹é¢å¡
â”‚       â”‚   â”œâ”€â”€ firestore.write.adapter.ts # å¯«å…¥ä»‹é¢å¡
â”‚       â”‚   â”œâ”€â”€ firestore.utils.ts         # Firestore å·¥å…·å‡½å¼
â”‚       â”‚   â””â”€â”€ repositories/             # ä¾èšåˆæ ¹åˆ†å‰²çš„è³‡æ–™å­˜å–å±¤
â”‚       â”‚       â”œâ”€â”€ account.repository.ts  # Account è®€å¯«
â”‚       â”‚       â”œâ”€â”€ workspace.repository.ts # Workspace è®€å¯«
â”‚       â”‚       â””â”€â”€ index.ts               # Barrel åŒ¯å‡º
â”‚       â”œâ”€â”€ storage/
â”‚       â”‚   â”œâ”€â”€ storage.client.ts
â”‚       â”‚   â”œâ”€â”€ storage.facade.ts
â”‚       â”‚   â”œâ”€â”€ storage.read.adapter.ts
â”‚       â”‚   â””â”€â”€ storage.write.adapter.ts
â”‚       â”œâ”€â”€ messaging/
â”‚       â”‚   â”œâ”€â”€ messaging.client.ts
â”‚       â”‚   â””â”€â”€ messaging.adapter.ts
â”‚       â””â”€â”€ analytics/
â”‚           â”œâ”€â”€ analytics.client.ts
â”‚           â””â”€â”€ analytics.adapter.ts
â”‚
â”œâ”€â”€ ğŸª hooks/                              # [é‚è¼¯å±¤] å¯é‡ç”¨ React Hooksï¼ˆæ©‹æ¥ UI èˆ‡ infraï¼‰
â”‚   â”œâ”€â”€ state/                             # ç‹€æ…‹å­˜å–ï¼ˆæ¶ˆè²» contextï¼‰
â”‚   â”‚   â”œâ”€â”€ use-account.ts                 # ç•¶å‰ account ç‹€æ…‹
â”‚   â”‚   â”œâ”€â”€ use-account-management.ts      # å¸³è™Ÿç®¡ç†æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ use-app.ts                     # AppContext å­˜å–
â”‚   â”‚   â”œâ”€â”€ use-user.ts                    # ä½¿ç”¨è€…å€‹äººè³‡æ–™
â”‚   â”‚   â””â”€â”€ use-visible-workspaces.ts      # å¯è¦‹ workspace æ¸…å–®
â”‚   â”œâ”€â”€ actions/                           # å‹•ä½œ Hooksï¼ˆå°è£ infra å‘¼å«ï¼‰
â”‚   â”‚   â”œâ”€â”€ use-daily-actions.ts           # æ—¥èªŒäº’å‹•ï¼ˆlike / commentï¼‰
â”‚   â”‚   â”œâ”€â”€ use-schedule-actions.ts        # è¡Œç¨‹æ“ä½œï¼ˆassign / proposeï¼‰
â”‚   â”‚   â””â”€â”€ use-bookmark-actions.ts        # æ›¸ç±¤æ“ä½œ
â”‚   â”œâ”€â”€ infra/                             # åŸºç¤è¨­æ–½ Hooks
â”‚   â”‚   â”œâ”€â”€ use-logger.ts                  # æ—¥èªŒè¨˜éŒ„
â”‚   â”‚   â””â”€â”€ use-storage.ts                 # Storage æ“ä½œ
â”‚   â””â”€â”€ ui/                               # UI Hooks
â”‚       â”œâ”€â”€ use-mobile.tsx                 # è¡Œå‹•è£ç½®åµæ¸¬
â”‚       â””â”€â”€ use-toast.ts                   # Toast é€šçŸ¥
â”‚
â”œâ”€â”€ ğŸŒ context/                            # [å…¨åŸŸç‹€æ…‹å±¤] React Context Providers
â”‚   â”œâ”€â”€ firebase-context.tsx               # æä¾› Firebase SDK å¯¦ä¾‹ï¼ˆdb / auth / storageï¼‰
â”‚   â”œâ”€â”€ auth-context.tsx                   # èªè­‰ä½¿ç”¨è€…ç‹€æ…‹ï¼ˆcurrentUserï¼‰
â”‚   â”œâ”€â”€ app-context.tsx                    # App é ‚å±¤ç‹€æ…‹ï¼ˆaccounts / activeAccountï¼‰
â”‚   â”œâ”€â”€ account-context.tsx                # ç•¶å‰ account è³‡æ–™ï¼ˆworkspaces / logsï¼‰
â”‚   â”œâ”€â”€ workspace-context.tsx              # å–®ä¸€ workspace è©³ç´°ç‹€æ…‹ï¼ˆtasks / membersï¼‰
â”‚   â”œâ”€â”€ theme-context.tsx                  # ä¸»é¡Œç‹€æ…‹
â”‚   â””â”€â”€ i18n-context.tsx                   # å¤šèªç³»ç‹€æ…‹
â”‚
â”œâ”€â”€ ğŸ¤– ai/                                 # [AI å±¤] Genkit æµç¨‹ï¼ˆå¹³è¡Œå±¤ï¼Œåƒ… app/ æ¶ˆè²»ï¼‰
â”‚   â”œâ”€â”€ genkit.ts                          # Genkit åˆå§‹åŒ–
â”‚   â”œâ”€â”€ dev.ts                             # é–‹ç™¼æ¨¡å¼å…¥å£
â”‚   â”œâ”€â”€ flows/
â”‚   â”‚   â”œâ”€â”€ adapt-ui-color-to-account-context.ts  # UI è‰²å½©è‡ªå‹•é©é…
â”‚   â”‚   â””â”€â”€ extract-invoice-items.ts       # ç™¼ç¥¨é …ç›®æå–
â”‚   â””â”€â”€ schemas/
â”‚       â””â”€â”€ docu-parse.ts                  # æ–‡ä»¶è§£æ Schemaï¼ˆZodï¼‰
â”‚
â””â”€â”€ ğŸ“± app/                                # [è¦–åœ–å±¤] Next.js App Routerï¼ˆé ‚å±¤çµ„è£ï¼‰
    â”œâ”€â”€ layout.tsx                         # æ ¹ä½ˆå±€
    â”œâ”€â”€ page.tsx                           # é¦–é ï¼ˆé‡å®šå‘è‡³ /dashboardï¼‰
    â”œâ”€â”€ globals.css                        # å…¨åŸŸæ¨£å¼
    â”‚
    â”œâ”€â”€ _components/                       # App å±¤å…±ç”¨å…ƒä»¶
    â”‚   â”œâ”€â”€ language-switcher.tsx          # èªè¨€åˆ‡æ›å™¨
    â”‚   â””â”€â”€ ui/                            # shadcn/ui åŸå­å…ƒä»¶ï¼ˆå”¯ä¸€ä¾†æºï¼‰
    â”‚       â”œâ”€â”€ accordion.tsx
    â”‚       â”œâ”€â”€ alert.tsx
    â”‚       â”œâ”€â”€ alert-dialog.tsx
    â”‚       â”œâ”€â”€ aspect-ratio.tsx
    â”‚       â”œâ”€â”€ avatar.tsx
    â”‚       â”œâ”€â”€ badge.tsx
    â”‚       â”œâ”€â”€ breadcrumb.tsx
    â”‚       â”œâ”€â”€ button.tsx
    â”‚       â”œâ”€â”€ button-group.tsx
    â”‚       â”œâ”€â”€ calendar.tsx
    â”‚       â”œâ”€â”€ card.tsx
    â”‚       â”œâ”€â”€ carousel.tsx
    â”‚       â”œâ”€â”€ chart.tsx
    â”‚       â”œâ”€â”€ checkbox.tsx
    â”‚       â”œâ”€â”€ collapsible.tsx
    â”‚       â”œâ”€â”€ command.tsx
    â”‚       â”œâ”€â”€ context-menu.tsx
    â”‚       â”œâ”€â”€ dialog.tsx
    â”‚       â”œâ”€â”€ drawer.tsx
    â”‚       â”œâ”€â”€ dropdown-menu.tsx
    â”‚       â”œâ”€â”€ empty.tsx
    â”‚       â”œâ”€â”€ field.tsx
    â”‚       â”œâ”€â”€ form.tsx
    â”‚       â”œâ”€â”€ hover-card.tsx
    â”‚       â”œâ”€â”€ input.tsx
    â”‚       â”œâ”€â”€ input-group.tsx
    â”‚       â”œâ”€â”€ input-otp.tsx
    â”‚       â”œâ”€â”€ item.tsx
    â”‚       â”œâ”€â”€ kbd.tsx
    â”‚       â”œâ”€â”€ label.tsx
    â”‚       â”œâ”€â”€ menubar.tsx
    â”‚       â”œâ”€â”€ navigation-menu.tsx
    â”‚       â”œâ”€â”€ pagination.tsx
    â”‚       â”œâ”€â”€ popover.tsx
    â”‚       â”œâ”€â”€ progress.tsx
    â”‚       â”œâ”€â”€ radio-group.tsx
    â”‚       â”œâ”€â”€ scroll-area.tsx
    â”‚       â”œâ”€â”€ select.tsx
    â”‚       â”œâ”€â”€ separator.tsx
    â”‚       â”œâ”€â”€ sheet.tsx
    â”‚       â”œâ”€â”€ sidebar.tsx
    â”‚       â”œâ”€â”€ skeleton.tsx
    â”‚       â”œâ”€â”€ slider.tsx
    â”‚       â”œâ”€â”€ sonner.tsx
    â”‚       â”œâ”€â”€ spinner.tsx
    â”‚       â”œâ”€â”€ switch.tsx
    â”‚       â”œâ”€â”€ table.tsx
    â”‚       â”œâ”€â”€ tabs.tsx
    â”‚       â”œâ”€â”€ textarea.tsx
    â”‚       â”œâ”€â”€ timeline.tsx
    â”‚       â”œâ”€â”€ toast.tsx
    â”‚       â”œâ”€â”€ toaster.tsx
    â”‚       â”œâ”€â”€ toggle.tsx
    â”‚       â”œâ”€â”€ toggle-group.tsx
    â”‚       â””â”€â”€ tooltip.tsx
    â”‚
    â”œâ”€â”€ (auth)/                            # èªè­‰æµç¨‹ï¼ˆNext.js Route Groupï¼‰
    â”‚   â””â”€â”€ login/
    â”‚       â”œâ”€â”€ page.tsx
    â”‚       â””â”€â”€ _components/
    â”‚           â”œâ”€â”€ auth-background.tsx
    â”‚           â”œâ”€â”€ auth-tabs-root.tsx
    â”‚           â”œâ”€â”€ login-form.tsx
    â”‚           â”œâ”€â”€ register-form.tsx
    â”‚           â””â”€â”€ reset-password-dialog.tsx
    â”‚
    â””â”€â”€ dashboard/
        â”œâ”€â”€ layout.tsx                     # Dashboard Shellï¼ˆSidebar + Headerï¼‰
        â”œâ”€â”€ page.tsx                       # Overviewï¼ˆaccount-grid + stat-cardsï¼‰
        â”‚
        â”œâ”€â”€ _components/                   # Dashboard å…±ç”¨ UI
        â”‚   â”œâ”€â”€ layout/
        â”‚   â”‚   â”œâ”€â”€ header.tsx
        â”‚   â”‚   â”œâ”€â”€ global-search.tsx
        â”‚   â”‚   â”œâ”€â”€ notification-center.tsx
        â”‚   â”‚   â””â”€â”€ theme-adapter.tsx
        â”‚   â”œâ”€â”€ overview/
        â”‚   â”‚   â”œâ”€â”€ account-grid.tsx
        â”‚   â”‚   â”œâ”€â”€ stat-cards.tsx
        â”‚   â”‚   â”œâ”€â”€ workspace-list.tsx
        â”‚   â”‚   â””â”€â”€ permission-tree.tsx
        â”‚   â”œâ”€â”€ settings/
        â”‚   â”‚   â”œâ”€â”€ index.tsx
        â”‚   â”‚   â”œâ”€â”€ profile-card.tsx
        â”‚   â”‚   â”œâ”€â”€ preferences-card.tsx
        â”‚   â”‚   â”œâ”€â”€ security-card.tsx
        â”‚   â”‚   â””â”€â”€ user-settings-overlay.tsx
        â”‚   â””â”€â”€ sidebar/
        â”‚       â”œâ”€â”€ index.tsx
        â”‚       â”œâ”€â”€ nav-main.tsx
        â”‚       â”œâ”€â”€ nav-user.tsx
        â”‚       â”œâ”€â”€ nav-workspaces.tsx
        â”‚       â”œâ”€â”€ account-switcher.tsx
        â”‚       â””â”€â”€ account-create-dialog.tsx
        â”‚
        â”œâ”€â”€ account/                       # ğŸ”µ Account ç¶­åº¦è·¯ç”±
        â”‚   â”‚                              # æ²»ç†é é¢ + ä¸€æ ¸å…©è¦–åœ–çš„ Account å´
        â”‚   â”œâ”€â”€ members/page.tsx           # æˆå“¡ç®¡ç†
        â”‚   â”œâ”€â”€ teams/                     # å…§éƒ¨åœ˜éšŠ
        â”‚   â”‚   â”œâ”€â”€ page.tsx
        â”‚   â”‚   â””â”€â”€ [id]/page.tsx
        â”‚   â”œâ”€â”€ partners/                  # åˆä½œå¤¥ä¼´
        â”‚   â”‚   â”œâ”€â”€ page.tsx
        â”‚   â”‚   â””â”€â”€ [id]/page.tsx
        â”‚   â”œâ”€â”€ audit/page.tsx             # â†’ capabilities/audit/audit.account.tsx
        â”‚   â”œâ”€â”€ daily/page.tsx             # â†’ capabilities/daily/daily.account.tsx
        â”‚   â”œâ”€â”€ schedule/page.tsx          # â†’ capabilities/schedule/schedule.account.tsx
        â”‚   â”œâ”€â”€ matrix/page.tsx            # æ¬Šé™çŸ©é™£
        â”‚   â””â”€â”€ settings/page.tsx          # å¸³è™Ÿè¨­å®š
        â”‚
        â””â”€â”€ workspaces/                    # ğŸŸ¢ Workspace ç¶­åº¦è·¯ç”±
            â”œâ”€â”€ page.tsx                   # Workspace åˆ—è¡¨
            â”œâ”€â”€ _components/               # WS åˆ—è¡¨ UI
            â”‚   â”œâ”€â”€ workspace-card.tsx
            â”‚   â”œâ”€â”€ workspace-grid-view.tsx
            â”‚   â”œâ”€â”€ workspace-table-view.tsx
            â”‚   â”œâ”€â”€ workspace-list-header.tsx
            â”‚   â””â”€â”€ create-workspace-dialog.tsx
            â”œâ”€â”€ _lib/
            â”‚   â”œâ”€â”€ use-workspace-filters.ts
            â”‚   â””â”€â”€ workspace-actions.ts   # WS åˆ—è¡¨å±¤ Server Actions
            â”‚
            â””â”€â”€ [id]/                      # å–®ä¸€ Workspace
                â”œâ”€â”€ layout.tsx             # WS Shellï¼ˆTabs + StatusBarï¼‰
                â”œâ”€â”€ page.tsx               # WS Overview
                â”‚
                â”œâ”€â”€ _components/           # WS Shell UI
                â”‚   â”œâ”€â”€ workspace-tabs.tsx
                â”‚   â”œâ”€â”€ workspace-status-bar.tsx
                â”‚   â””â”€â”€ workspace-settings.tsx
                â”‚
                â”œâ”€â”€ _events/               # WS äº‹ä»¶åŒ¯æµæ’
                â”‚   â”œâ”€â”€ workspace-event-bus.ts
                â”‚   â”œâ”€â”€ workspace-events.ts
                â”‚   â””â”€â”€ workspace-event-handler.tsx
                â”‚
                â””â”€â”€ capabilities/          # Workspace Capability ç³»çµ±ï¼ˆå››å±¤æ¨¡å‹ï¼‰
                    â”œâ”€â”€ index.ts           # Barrel åŒ¯å‡ºï¼ˆworkspace è¦–åœ–ï¼‰
                    â”‚
                    â”‚   # â”€â”€ Layer 1: COREï¼ˆæ°¸é é¡¯ç¤ºï¼‰â”€â”€ Workspace ç”Ÿå‘½é€±æœŸç®¡ç†
                    â”œâ”€â”€ capabilities/
                    â”‚   â””â”€â”€ workspace-capabilities.tsx   # Capability æ›è¼‰ / å¸è¼‰ç®¡ç†
                    â”‚
                    â”‚   # â”€â”€ Layer 2: GOVERNANCEï¼ˆæ°¸é é¡¯ç¤ºï¼‰â”€â”€ å­˜å–æ§åˆ¶
                    â”œâ”€â”€ members/
                    â”‚   â”œâ”€â”€ workspace-members.tsx
                    â”‚   â””â”€â”€ workspace-members-management.tsx
                    â”‚
                    â”‚   # â”€â”€ Layer 3: BUSINESSï¼ˆå¯æ›è¼‰ï¼‰â”€â”€ ç”¢å“åŠŸèƒ½æ¨¡çµ„
                    â”‚   #    æ¯å€‹æ¨¡çµ„ä½¿ç”¨ã€Œä¸€æ ¸å…©è¦–åœ–ã€æ¨¡å¼ï¼ˆè¦‹ä¸‹æ–¹èªªæ˜ï¼‰
                    â”œâ”€â”€ daily/                            # æ—¥èªŒæ¨¡çµ„
                    â”‚   â”œâ”€â”€ daily.workspace.tsx           # Workspace è¦–åœ–ï¼ˆå¯« + è®€ï¼‰
                    â”‚   â”œâ”€â”€ daily.account.tsx             # Account è¦–åœ–ï¼ˆèšåˆå”¯è®€ï¼‰
                    â”‚   â”œâ”€â”€ daily.view.tsx                # å…±ç”¨è¦–åœ–é‚è¼¯
                    â”‚   â”œâ”€â”€ _components/
                    â”‚   â”‚   â”œâ”€â”€ composer.tsx
                    â”‚   â”‚   â”œâ”€â”€ daily-log-card.tsx
                    â”‚   â”‚   â”œâ”€â”€ daily-log-dialog.tsx
                    â”‚   â”‚   â”œâ”€â”€ image-carousel.tsx
                    â”‚   â”‚   â””â”€â”€ actions/
                    â”‚   â”‚       â”œâ”€â”€ like-button.tsx
                    â”‚   â”‚       â”œâ”€â”€ comment-button.tsx
                    â”‚   â”‚       â”œâ”€â”€ bookmark-button.tsx
                    â”‚   â”‚       â””â”€â”€ share-button.tsx
                    â”‚   â””â”€â”€ _hooks/
                    â”‚       â”œâ”€â”€ use-workspace-daily.ts
                    â”‚       â”œâ”€â”€ use-daily-upload.ts
                    â”‚       â””â”€â”€ use-aggregated-logs.ts
                    â”œâ”€â”€ schedule/                         # è¡Œç¨‹ / æ±ºç­–æ¨¡çµ„
                    â”‚   â”œâ”€â”€ schedule.workspace.tsx        # Workspace è¦–åœ–ï¼ˆææ¡ˆæ–¹ï¼‰
                    â”‚   â”œâ”€â”€ schedule.account.tsx          # Account è¦–åœ–ï¼ˆæ ¸å‡†æ–¹ï¼‰
                    â”‚   â”œâ”€â”€ schedule.view.tsx             # å…±ç”¨è¦–åœ–é‚è¼¯
                    â”‚   â”œâ”€â”€ _components/
                    â”‚   â”‚   â”œâ”€â”€ unified-calendar-grid.tsx
                    â”‚   â”‚   â”œâ”€â”€ governance-sidebar.tsx
                    â”‚   â”‚   â”œâ”€â”€ proposal-dialog.tsx
                    â”‚   â”‚   â”œâ”€â”€ schedule-data-table.tsx
                    â”‚   â”‚   â”œâ”€â”€ upcoming-events-columns.tsx
                    â”‚   â”‚   â””â”€â”€ decision-history-columns.tsx
                    â”‚   â””â”€â”€ _hooks/
                    â”‚       â”œâ”€â”€ use-workspace-schedule.ts
                    â”‚       â””â”€â”€ use-global-schedule.ts
                    â”œâ”€â”€ tasks/                            # ä»»å‹™æ¨¡çµ„
                    â”‚   â”œâ”€â”€ workspace-tasks.component.tsx
                    â”‚   â”œâ”€â”€ workspace-tasks.logic.ts
                    â”‚   â””â”€â”€ workspace-tasks.types.ts
                    â”œâ”€â”€ finance/                          # è²¡å‹™æ¨¡çµ„
                    â”‚   â””â”€â”€ workspace-finance.tsx
                    â”œâ”€â”€ files/                            # æª”æ¡ˆæ¨¡çµ„
                    â”‚   â””â”€â”€ workspace-files.tsx
                    â”œâ”€â”€ issues/                           # å•é¡Œè¿½è¹¤
                    â”‚   â””â”€â”€ workspace-issues.tsx
                    â”œâ”€â”€ qa/                               # QA æ¨¡çµ„
                    â”‚   â””â”€â”€ workspace-qa.tsx
                    â”œâ”€â”€ acceptance/                       # é©—æ”¶æ¨¡çµ„
                    â”‚   â””â”€â”€ workspace-acceptance.tsx
                    â”œâ”€â”€ document-parser/                  # AI æ–‡ä»¶è§£æ
                    â”‚   â”œâ”€â”€ actions.ts                    # Server Actionsï¼ˆå‘¼å« ai/flowsï¼‰
                    â”‚   â””â”€â”€ workspace-document-parser.component.tsx
                    â”‚
                    â”‚   # â”€â”€ Layer 4: PROJECTIONï¼ˆæ°¸é é¡¯ç¤ºï¼‰â”€â”€ å”¯è®€äº‹ä»¶æµ
                    â””â”€â”€ audit/
                        â”œâ”€â”€ audit.workspace.tsx           # Workspace è¦–åœ–ï¼ˆæœ¬åœ°äº‹ä»¶æµï¼‰
                        â”œâ”€â”€ audit.account.tsx             # Account è¦–åœ–ï¼ˆè·¨ WS å½™ç¸½ï¼‰
                        â”œâ”€â”€ audit.view.tsx                # å…±ç”¨è¦–åœ–é‚è¼¯
                        â”œâ”€â”€ _components/
                        â”‚   â”œâ”€â”€ audit-timeline.tsx
                        â”‚   â”œâ”€â”€ audit-event-item.tsx
                        â”‚   â”œâ”€â”€ audit-detail-sheet.tsx
                        â”‚   â””â”€â”€ audit-type-icon.tsx
                        â””â”€â”€ _hooks/
                            â”œâ”€â”€ use-workspace-audit.ts
                            â””â”€â”€ use-account-audit.ts


ğŸ§­ ä¾è³´æµå‘åœ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    app/ï¼ˆè¦–åœ–å±¤ / é ‚å±¤ï¼‰                      â”‚
â”‚    account/ è·¯ç”±          workspaces/[id]/capabilities/     â”‚
â”‚  ï¼ˆæ²»ç† + Account è¦–åœ–ï¼‰    ï¼ˆWS å››å±¤èƒ½åŠ›æ¨¡å‹ï¼‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ çµ„è£ï¼ˆåªæ¶ˆè²»ï¼Œä¸å«åŸºç¤è¨­æ–½é‚è¼¯ï¼‰
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     context/         â”‚       â”‚       hooks/          â”‚
â”‚  firebase / auth /  â”‚       â”‚  state / actions /    â”‚
â”‚  app / account /    â”‚â—„â”€â”€â”€â”€â”€â”€â”‚  infra / ui           â”‚
â”‚  workspace / theme  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  / i18n             â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
              â”‚                          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ æ¶ˆè²»
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚         infra/          â”‚
              â”‚  firebase/              â”‚
              â”‚  auth / firestore /     â”‚
              â”‚  storage / messaging /  â”‚
              â”‚  analytics              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ æ¶ˆè²»
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚          lib/           â”‚
              â”‚  utils / format / i18n  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ æ¶ˆè²»
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚         types/          â”‚
              â”‚   domain / i18n / ...   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ai/ï¼ˆå¹³è¡Œå±¤ï¼‰ï¼šåªç”± app/ æ¶ˆè²»ï¼Œä¸åƒèˆ‡ä¸Šè¿°å…­å±¤ä¾è³´éˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  app/dashboard/workspaces/[id]/     â”‚
â”‚  capabilities/document-parser/      â”‚
â”‚  actions.ts                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ å‘¼å« Genkit flows
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ai/flows/                          â”‚
â”‚  extract-invoice-items.ts           â”‚
â”‚  adapt-ui-color-to-account-context  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ’¡ é—œéµè¨­è¨ˆåŸå‰‡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸå‰‡                    â”‚ èªªæ˜                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å–®å‘ä¾è³´                â”‚ æ¯å±¤åªèƒ½ä¾è³´ä¸‹å±¤ï¼›ç¦æ­¢åå‘ importï¼Œæœçµ•å¾ªç’°ä¾è³´                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸€æ ¸å…©è¦–åœ–              â”‚ daily / schedule / audit å„æœ‰ä¸€ä»½æ ¸å¿ƒè³‡æ–™ï¼Œåˆ†åˆ¥æ˜ å°„è‡³ï¼š           â”‚
â”‚                         â”‚ â€¢ {cap}.workspace.tsxï¼ˆWS ç¶­åº¦ï¼‰                                 â”‚
â”‚                         â”‚ â€¢ {cap}.account.tsxï¼ˆAccount ç¶­åº¦ï¼‰                              â”‚
â”‚                         â”‚ Account è¦–åœ–ç”± account/{cap}/page.tsx æ¶ˆè²»                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Capability å››å±¤æ¨¡å‹     â”‚ WS å…§èƒ½åŠ›æŒ‰ Core â†’ Governance â†’ Business â†’ Projection æ’åˆ—       â”‚
â”‚                         â”‚ Core / Governance / Projection æ°¸é é¡¯ç¤ºï¼›Business æŒ‰éœ€æ›è¼‰       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _components / _hooks    â”‚ æ¯å€‹èƒ½åŠ›æ¨¡çµ„è‡ªå¸¶ _components/ï¼ˆè¦–åœ–å…ƒä»¶ï¼‰èˆ‡ _hooks/ï¼ˆé‚è¼¯ï¼‰       â”‚
â”‚ å°±è¿‘å…±ç½®                â”‚ é‚è¼¯èˆ‡è¦–åœ–ç·Šé„°ï¼Œä¸è·¨æ¨¡çµ„å…±ç”¨ï¼Œæ˜“ç¶­è­·æ˜“åˆªé™¤                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ui/ å”¯ä¸€ä¾†æº            â”‚ shadcn/ui åŸå­å…ƒä»¶åªåœ¨ app/_components/ui/ ä¸€è™•ï¼Œä¸é‡è¤‡æ•£è½       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ infra ä¸çŸ¥ React        â”‚ infra/ åªä¾è³´ lib / typesï¼›ä¸ import hooks / context / å…ƒä»¶       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ai/ èˆ‡æ¥­å‹™è§£è€¦          â”‚ ai/flows/ æ˜¯ç´”å‡½å¼ï¼›åªç”± app/ çš„ Server Actions å‘¼å«             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
